# Generated by Ansible - K3s containerd registries configuration
# See: https://docs.k3s.io/installation/private-registry

configs:
  {{ nexus_registry_url }}:
    auth:
      username: {{ nexus_username }}
      password: {{ nexus_password }}
    tls:
      insecure_skip_verify: {{ (insecure_skip_verify | default(false)) | bool | lower }}

mirrors:
  docker.io:
    endpoint:
      - https://{{ nexus_registry_url }}
      - https://registry-1.docker.io
  registry.k8s.io:
    endpoint:
      - https://{{ nexus_registry_url }}
      - https://registry.k8s.io
{% for repo in registry_extra_mirrors | default([]) %}
  {{ repo }}:
    endpoint:
      - https://{{ nexus_registry_url }}
{% endfor %}
